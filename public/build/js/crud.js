obtenerEntidades(),document.addEventListener("DOMContentLoaded",(function(){modal()}));let entidades=[],filtradas=[],maestros=[];const inputBuscar=document.querySelector("#buscar");function buscarSolictud(e){const r=e.target.value;""!==r?(filtradas=entidades.filter((e=>e.nombre.startsWith(r))),0===filtradas.length&&(filtradas.length=1)):filtradas=[],mostrarEntidades()}async function obtenerEntidades(){try{const e=`/api/${entidadNombre}`,r=await fetch(e),o=await r.json();entidades=o.entidad,maestros=o.maestros,mostrarEntidades()}catch(e){console.log(e)}}function modal(){document.querySelector("#btn-crear").addEventListener("click",(function(){mostrarEntidad()}))}function mostrarEntidad(e=!1,r={}){const o=document.createElement("DIV");o.classList.add("absolute","top-0","left-0","w-full","h-full","bg-gray-600/50","flex","justify-center","items-center","modal","z-30");const t={semestres:["Octavo Semestre","Septimo Semestre","Sexto Semestre","Quinto Semestre","Cuarto Semestre","Tercer Semestre","Segundo Semestre","Primer Semestre"],carreras:["Ingenieria en Sistemas Computacionales","Ingenieria en Inovacion Agricola","Ingenieria en Mecatronica","Ingenieria Industrias Alimentarias","Ingenieria Administracion"],grupos:["A","B","C","D","E","F"]},n=t.semestres.map((e=>`\n        <option value="${e}" ${r.semestre===e?"selected":""}>${e}</option>\n    `)).join(""),l=t.carreras.map((e=>`\n        <option value="${e}" ${r.carrera===e?"selected":""}>${e}</option>\n    `)).join(""),a=t.grupos.map((e=>`\n        <option value="${e}" ${r.grupo===e?"selected":""}>${e}</option>\n    `)).join("");if("maestro"===entidadSingular&&(o.innerHTML=`\n        <div id="formulario" class="w-xl bg-white opacity-100 p-5 rounded-lg scale-in-ver-top">\n            <h1 id="referencia" class="text-blue-700 font-bold text-xl">Agregar maestro</h1>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"nombre" class="">Nombre</label>\n                    <input id="nombre" type="text" value="${r.nombre?r.nombre:""}"name="nombre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.nombre?"Ingresa el nuevo nombre":"Ingresa el nombre del maestro"}">\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"apellidos" class="">Apellidos</label>\n                    <input type="text" value="${r.apellidos?r.apellidos:""}"name="apellidos" id="apellidos" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.apellidos?"Ingresa los nuevos apellidos":"Ingresa los apellidos"}">\n                </div>\n            </div>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"numero" class="">Numero</label>\n                    <input type="number" value="${r.numero?r.numero:""}" name="numero" id="numero" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.numero?"Ingresa el nuevo numero":"Ingresa el numero del maestro"}">\n                </div>\n            </div>\n            <div class="flex mt-3 w-full gap-5">\n                <button id="cerrar" class="w-full px-3 py-2 bg-gray-200 hover:bg-gray-300 transition-all rounded-lg cursor-pointer font-medium">Cerrar</button>\n                <button id="submit" class="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 transition-all rounded-lg cursor-pointer font-medium text-white">${e?"Editar":"Guardar"}</button>\n            </div>\n        </div>\n    `),"alumno"===entidadSingular&&(o.innerHTML=`\n        <div id="formulario" class="w-xl bg-white opacity-100 p-5 rounded-lg scale-in-ver-top">\n            <h1 id="referencia" class="text-blue-700 font-bold text-xl">Agregar alumno</h1>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"nombre">Nombre</label>\n                    <input id="nombre" type="text" value="${r.nombre?r.nombre:""}" name="nombre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.nombre?"Ingresa el nuevo nombre":"Ingresa el nombre del maestro"}">\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"apellidos">Apellidos</label>\n                    <input id="apellidos" type="text" value="${r.apellidos?r.apellidos:""}" name="apellidos" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.apellidos?"Ingresa los nuevos apellidos":"Ingresa los apellidos"}">\n                </div>\n            </div>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"numeroControl">Numero de control</label>\n                    <input id="numeroControl"type="number" value="${r.numeroControl?r.numeroControl:""}" name="numeroControl" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.numeroControl?"Ingresa el numero de control":"Ingresa el nuevo numero de control"}">\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"correo">Correo</label>\n                    <input id="correo" type="text" value="${r.correo?r.correo:""}" name="correo" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500" placeholder="${r.correo?"Ingresa el correo":"Ingresa el nuevo correo"}">\n                </div>\n            </div>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"password">Contraseña</label>\n                    <input id="password" type="text" value="${r.password?r.password:""}" name="password" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500" placeholder="${r.password?"Ingresa la contraseña":"Ingresa la nueva contraseña"}">\n                </div>\n            </div>\n            <div class="flex flex-col gap-2 mt-2 w-full">\n                <label for"semestre">Semestre</label>\n                <select id="semestre" name="semestre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                    <option selected disabled value="">Selecciona el semestre</option>\n                    ${n}\n                </select>\n            </div>\n            <div class="flex flex-col gap-2 mt-2 w-full">\n                <label for"carrera">Carrera</label>\n                <select id="carrera" name="carrera" class ="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                    <option selected disabled value="">Selecciona la carrera</option>\n                    ${l}\n                </select>\n            </div>\n\n            <div class="flex flex-col gap-2 mt-2 w-full">\n                <label for"grupo">Grupo</label>\n                <select id="grupo" name="grupo" class ="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                    <option selected disabled value="">Selecciona el grupo</option>\n                    ${a}\n                </select>\n            </div>\n\n            <div class="flex mt-3 w-full gap-5">\n                <button id="cerrar" class="w-full px-3 py-2 bg-gray-200 hover:bg-gray-300 transition-all rounded-lg cursor-pointer font-medium">Cerrar</button>\n                <button id="submit" class="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 transition-all rounded-lg cursor-pointer font-medium text-white">${e?"Editar":"Guardar"}</button>\n            </div>\n        </div>\n    `),"materia"===entidadSingular){const t={semestres:["Octavo Semestre","Septimo Semestre","Sexto Semestre","Quinto Semestre","Cuarto Semestre","Tercer Semestre","Segundo Semestre","Primer Semestre"]}.semestres.map((e=>`\n                <option value="${e}" ${r.semestre===e?"selected":""}>${e}</option>\n            `)).join("");o.innerHTML=`\n        <div id="formulario" class="w-xl bg-white opacity-100 p-5 rounded-lg scale-in-ver-top">\n        <h1 id="referencia" class="text-blue-700 font-bold text-xl">Agregar materia</h1>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"nombre">Nombre</label>\n                    <input id="nombre" type="text" value="${r.nombre?r.nombre:""}"name="nombre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.nombre?"Ingresa el nuevo nombre":"Ingresa el nombre de la materia"}">\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"clave">Clave</label>\n                    <input id="clave" type="text" value="${r.clave?r.clave:""}"name="clave" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.clave?"Ingresa la nueva clave":"Ingresa la clave"}">\n                </div>\n            </div>\n            <div class="flex flex-col gap-2 mt-2 w-full">\n                <label for"semestre">Semestre</label>\n                <select id="semestre" name="semestre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                    <option selected disabled value="">Selecciona el semestre</option>\n                    ${t}\n                </select>\n            </div>\n            <div class="flex mt-3 w-full gap-5">\n                <button id="cerrar" class="w-full px-3 py-2 bg-gray-200 hover:bg-gray-300 transition-all rounded-lg cursor-pointer font-medium">Cerrar</button>\n                <button id="submit" class="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 transition-all rounded-lg cursor-pointer font-medium text-white">${e?"Editar":"Guardar"}</button>\n            </div>\n        </div>\n        `}if("usuario"===entidadSingular){const t={tipos:["Admin","Alumno","CT"]}.tipos.map((e=>`\n                <option value="${e}" ${r.tipo===e?"selected":""}>${e}</option>\n        `)).join("");o.innerHTML=`\n        <div id="formulario" class="w-xl bg-white opacity-100 p-5 rounded-lg scale-in-ver-top">\n        <h1 id="referencia" class="text-blue-700 font-bold text-xl">Agregar usuario</h1>\n            <div class="flex gap-5">\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"nombre">Nombre</label>\n                    <input id="nombre" type="text" value="${r.nombre?r.nombre:""}"name="nombre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.nombre?"Ingresa el nuevo nombre":"Ingresa el nombre del maestro"}">\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"apellidos">Apellidos</label>\n                    <input id="apellidos" type="text" value="${r.apellidos?r.apellidos:""}" name="apellidos" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500 " placeholder="${r.apellidos?"Ingresa los nuevos apellidos":"Ingresa los apellidos"}">\n                </div>\n            </div>\n            <div class="flex flex-col gap-2 mt-2 w-full">\n                <label for"email">Email</label>\n                <input id="email" type="text" value="${r.email?r.email:""}" name="email" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500" placeholder="${r.correo?"Ingresa el nuevo correo":"Ingresa el correo"}">\n            </div>\n            <div class="flex flex-col gap-2 mt-2 w-full">\n                <label for"tipo">Tipo</label>\n                <select id="tipo" name="tipo" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                    <option selected disabled value="">Selecciona el tipo de usuario</option>\n                    ${t}\n                </select>\n            </div>\n            <div class="flex mt-3 w-full gap-5">\n                <button id="cerrar" class="w-full px-3 py-2 bg-gray-200 hover:bg-gray-300 transition-all rounded-lg cursor-pointer font-medium">Cerrar</button>\n                <button id="submit" class="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 transition-all rounded-lg cursor-pointer font-medium text-white">${e?"Editar":"Guardar"}</button>\n            </div>\n        </div>\n        `}if("evaluacion"===entidadSingular){const r=maestros.map((e=>`\n            <option value="${e.id}">${e.nombre} ${e.apellidos}</option>\n         `)).join("");o.innerHTML=`\n        <div id="formulario" class="w-xl bg-white opacity-100 p-5 rounded-lg scale-in-ver-top">\n            <h1 id="referencia" class="text-blue-700 font-bold text-xl">Asignar tutor</h1>\n                <fieldset class="mt-3">\n                <legend class="font-medium text-gray-800">Información del grupo</legend>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"semestre">Semestre</label>\n                    <select id="semestre" name="semestre" class="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                        <option selected disabled value="">Selecciona el semestre</option>\n                        ${n}\n                    </select>\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"carrera">Carrera</label>\n                    <select id="carrera" name="carrera" class ="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                        <option selected disabled value="">Selecciona la carrera</option>\n                        ${l}\n                    </select>\n                </div>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"grupo">Grupo</label>\n                    <select id="grupo" name="grupo" class ="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                        <option selected disabled value="">Selecciona el grupo</option>\n                        ${a}\n                    </select>\n                </div>\n                </fieldset>\n                <fieldset class = "mt-3">\n                <legend class="font-medium text-gray-800">Tutor</legend>\n                <div class="flex flex-col gap-2 mt-2 w-full">\n                    <label for"grupo">Maestro</label>\n                    <select id="maestro" name="idMaestro" class ="w-full border-gray-300 border-1 rounded-xl py-2 px-2 focus:outline-blue-500 focus:bg-blue-50 transition duration-500 ease-in-out outline-blue-500">\n                        <option selected disabled value="">Selecciona el maestro</option>\n                        ${r}\n                    </select>\n                </div>\n                </fieldset>\n                <div class="flex mt-3 w-full gap-5">\n                    <button id="cerrar" class="w-full px-3 py-2 bg-gray-200 hover:bg-gray-300 transition-all rounded-lg cursor-pointer font-medium">Cerrar</button>\n                    <button id="submit" class="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 transition-all rounded-lg cursor-pointer font-medium text-white">${e?"Editar":"Guardar"}</button>\n                </div>\n        </div>\n    `}o.addEventListener("click",(function(t){if(t.preventDefault(),"cerrar"===t.target.id){document.querySelector("#formulario").classList.add("scale-in-ver-top-reverse"),setTimeout((()=>{o.remove()}),500)}"submit"===t.target.id&&("maestro"===entidadSingular&&validarMaestro(e,r),"alumno"===entidadSingular&&validarAlumno(e,r),"materia"===entidadSingular&&validarMateria(e,r),"usuario"===entidadSingular&&validarUsuario(e,r),"evaluacion"===entidadSingular&&validarEvaluacion(e,r))})),document.querySelector("body").appendChild(o)}function validarMaestro(e,r){const o=document.querySelector("#nombre").value.trim(),t=document.querySelector("#apellidos").value.trim(),n=document.querySelector("#numero").value.trim();if(""===o|""===t||""===n)return void alerta("error","Todos los campos son obligatorios",document.querySelector("#referencia"));if(""===o)return void alerta("error","El nombre es obligatorio",document.querySelector("#referencia"));if(""===t)return void alerta("error","Ingrese los apellidos",document.querySelector("#referencia"));if(""===n)return void alerta("error","El numero es obligatorio",document.querySelector("#referencia"));const l=document.querySelector(".modal"),a={nombre:o,apellidos:t,numero:n};e?(r.nombre=o,r.apellidos=t,r.numero=n,actualizarEntidad(`http://localhost:3000/api/${entidadSingular}/actualizar`,r),l.remove()):(agregar(a,`http://localhost:3000/api/${entidadSingular}`),l.remove())}function validarAlumno(e,r){const o=document.querySelector("#nombre").value.trim(),t=document.querySelector("#apellidos").value.trim(),n=document.querySelector("#numeroControl").value.trim(),l=document.querySelector("#correo").value.trim(),a=document.querySelector("#password").value.trim(),i=document.querySelector("#semestre").value.trim(),s=document.querySelector("#carrera").value.trim(),d=document.querySelector("#grupo").value.trim();if(""===o&&""===t&&""===n&&""==l&&""===a&&""===i&&""===s&&""===d)return void alerta("error","Todos los campos son obligatorios",document.querySelector("#referencia"));if(""===o)return void alerta("error","El nombre es obligatorio",document.querySelector("#referencia"));if(""===t)return void alerta("error","Los apellidos son obligatorios",document.querySelector("#referencia"));if(""===n)return void alerta("error","Ingresa el numero de control",document.querySelector("#referencia"));if(""===l)return void alerta("error","Ingresa el correo",document.querySelector("#referencia"));if(""===a)return void alerta("error","Ingresa el password",document.querySelector("#referencia"));if(""===i)return void alerta("error","Selecciona un semestre",document.querySelector("#referencia"));if(""===s)return void alerta("error","Selecciona una carrera",document.querySelector("#referencia"));if(""===d)return void alerta("error","Selecciona un grupo",document.querySelector("#referencia"));const u=document.querySelector(".modal"),c={nombre:o,apellidos:t,numeroControl:n,correo:l,password:a,semestre:i,carrera:s,grupo:d};e?(r.nombre=o,r.apellidos=t,r.numeroControl=n,r.correo=l,r.password=a,r.semestre=i,r.carrera=s,r.grupo=d,actualizarEntidad(`http://localhost:3000/api/${entidadSingular}/actualizar`,r),u.remove()):(agregar(c,`http://localhost:3000/api/${entidadSingular}`),u.remove())}function validarMateria(e,r){const o=document.querySelector("#nombre").value.trim(),t=document.querySelector("#clave").value.trim(),n=document.querySelector("#semestre").value.trim();if(""===o&&""===t&&""===n)return void alerta("error","Todos los campos son obligatorios",document.querySelector("#referencia"));if(""===t)return void alerta("error","La clave es obligatoria",document.querySelector("#referencia"));if(""===n)return void alerta("error","Seleccione el semestre",document.querySelector("#referencia"));const l=document.querySelector(".modal"),a={nombre:o.trim(),clave:t.trim(),semestre:n.trim()};e?(r.nombre=o.trim(),r.clave=t.trim(),r.semestre=n.trim(),actualizarEntidad(`http://localhost:3000/api/${entidadSingular}/actualizar`,r),l.remove()):(agregar(a,`http://localhost:3000/api/${entidadSingular}`),l.remove())}function validarUsuario(e,r){const o=document.querySelector("#nombre").value.trim(),t=document.querySelector("#apellidos").value.trim(),n=document.querySelector("#email").value.trim(),l=document.querySelector("#tipo").value.trim();if(""===o&&""===t&&""===correo&&""===l)return void alerta("error","Todos los campos son obligatorios",document.querySelector("#referencia"));if(""===o)return void alerta("error","El nombre es obligatorio",document.querySelector("#referencia"));if(""===t)return void alerta("error","Ingrese los apellidos",document.querySelector("#referencia"));if(""===n)return void alerta("error","El correo es obligatorio",document.querySelector("#referencia"));if(""===l)return void alerta("error","Seleccione el tipo de usuario",document.querySelector("#referencia"));const a=document.querySelector(".modal"),i={nombre:o,apellidos:t,email:n,tipo:l};e?(r.nombre=o,r.apellidos=t,r.email=n,r.tipo=l,actualizarEntidad(`http://localhost:3000/api/${entidadSingular}/actualizar`,r),a.remove()):(agregar(i,`http://localhost:3000/api/${entidadSingular}`),a.remove())}function validarEvaluacion(e,r){const o=document.querySelector("#semestre").value.trim(),t=document.querySelector("#carrera").value.trim(),n=document.querySelector("#grupo").value.trim(),l=document.querySelector("#maestro").value.trim();if(""===o)return void alerta("error","Selecciona un semestre",document.querySelector("#referencia"));if(""===t)return void alerta("error","Selecciona una carrera",document.querySelector("#referencia"));if(""===n)return void alerta("error","Selecciona un grupo",document.querySelector("#referencia"));if(""===l)return void alerta("error","Seleccione un maestro",document.querySelector("#referencia"));const a=document.querySelector(".modal"),i={semestre:o,carrera:t,grupo:n,maestro:l};e?(r.semestre=o,r.carrera=t,r.grupo=n,r.maestro=l,actualizarEntidad(`http://localhost:3000/api/${entidadSingular}/actualizar`,r),a.remove()):(agregar(i,`http://localhost:3000/api/${entidadSingular}`),a.remove())}function mostrarEntidades(){limpiarEntidades();const e=filtradas.length?filtradas:entidades;0!==e.length&&e.forEach((e=>{const r=document.createElement("TR");if(r.classList.add("border-b","border-gray-200"),"maestros"===entidadNombre){const o=document.createElement("TD");o.classList.add("p-3"),o.textContent=e.nombre+" "+e.apellidos;const t=document.createElement("TD");t.classList.add("p-3"),t.textContent=e.numero,r.appendChild(o),r.appendChild(t)}if("alumnos"===entidadNombre){const o=document.createElement("TD");o.classList.add("p-3"),o.textContent=e.nombre+" "+e.apellidos;const t=document.createElement("TD");t.classList.add("p-3"),t.textContent=e.numeroControl;const n=document.createElement("TD");n.classList.add("p-3"),n.textContent=e.correo;const l=document.createElement("TD");l.classList.add("p-3"),l.textContent=e.semestre,r.appendChild(o),r.appendChild(t),r.appendChild(n),r.appendChild(l)}if("materias"===entidadNombre){const o=document.createElement("TD");o.classList.add("p-3"),o.textContent=e.nombre;const t=document.createElement("TD");t.classList.add("p-3"),t.textContent=e.clave;const n=document.createElement("TD");n.classList.add("p-3"),n.textContent=e.semestre,r.appendChild(o),r.appendChild(t),r.appendChild(n)}if("usuarios"===entidadNombre){const o=document.createElement("TD");o.classList.add("p-3"),o.textContent=e.nombre+" "+e.apellidos;const t=document.createElement("TD");t.classList.add("p-3"),t.textContent=e.email;const n=document.createElement("TD");n.classList.add("p-3"),n.textContent=e.tipo,r.appendChild(o),r.appendChild(t),r.appendChild(n)}if("evaluaciones"===entidadNombre){const o=document.createElement("TD");o.classList.add("p-3"),o.textContent=e.alumnoNombre+" "+e.alumnoApellidos;const t=document.createElement("TD");t.classList.add("p-3"),t.textContent=e.maestroNombre+" "+e.maestroApellidos;const n=document.createElement("TD"),l=document.createElement("P");n.classList.add("p-3"),n.appendChild(l),0===Number.parseInt(e.estado)?(l.textContent="Sin realizar",l.classList.add("bg-red-50","px-3","py-1","inline","rounded-md","border-1","border-red-200","text-red-600","font-medium")):(l.textContent="Realizada",l.classList.add("bg-green-50","px-3","py-1","inline","rounded-md","border-1","border-green-200","text-green-600","font-medium")),r.appendChild(o),r.appendChild(t),r.appendChild(n)}const o=document.createElement("TD");o.classList.add("flex","gap-3","items-center","p-3");const t=document.createElement("BUTTON");t.classList.add("cursor-pointer"),t.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#2835ff">\n            <path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z" />\n        </svg>\n        ',t.addEventListener("click",(function(){mostrarEntidad(editar=!0,{...e})}));const n=document.createElement("BUTTON");n.classList.add("cursor-pointer"),n.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#8B1A10">\n            <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z" />\n        </svg>\n        ',n.ondblclick=function(){confirmarEliminarEntidad({...e})},o.appendChild(t),o.appendChild(n),r.appendChild(o),document.querySelector("#tbody").appendChild(r)}))}async function agregar(e,r){const o=new FormData;for(const r in e)o.append(r,e[r]);try{const t=await fetch(r,{method:"POST",body:o}),n=await t.json();if("exito"===n.tipo)new Notyf({duration:3e3,position:{x:"right",y:"top"}}).success(n.mensaje),n.evaluaciones&&Array.isArray(n.evaluaciones)?(n.evaluaciones.forEach((e=>{entidades=[...entidades,e]})),mostrarEntidades()):(e.id=String(n.id),entidades=[...entidades,e],mostrarEntidades());if("error"===n.tipo)new Notyf({duration:3e3,position:{x:"right",y:"top"}}).error(n.mensaje)}catch(e){console.log(e)}}async function actualizarEntidad(e,r){console.log(r);const o=new FormData;for(const e in r)o.append(e,r[e]);try{const t=await fetch(e,{method:"POST",body:o}),n=await t.json();if("exito"===n.tipo){new Notyf({duration:3e3,position:{x:"right",y:"top"}}).success(n.mensaje);let e=[];for(const o in r)e.push(o);entidades=entidades.map((e=>(e.id===r.id&&(e=r),e))),mostrarEntidades()}}catch(e){console.log(e)}}async function eliminarEntidad(e){const r=new FormData;for(const o in e)r.append(o,e[o]);try{const o=`http://localhost:3000/api/${entidadSingular}/eliminar`,t=await fetch(o,{method:"POST",body:r}),n=await t.json();if("exito"===n.tipo)new Notyf({duration:3e3,position:{x:"right",y:"top"}}).success(n.mensaje),entidades=entidades.filter((r=>r.id!==e.id)),mostrarEntidades()}catch(e){console.log(e)}}function confirmarEliminarEntidad(e){Swal.fire({title:`¿Eliminar ${entidadSingular}?`,showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"#99a3a4",confirmButtonColor:"#000fff"}).then((r=>{r.isConfirmed&&eliminarEntidad(e)}))}function limpiarEntidades(){const e=document.querySelector("#tbody");for(;e.firstChild;)e.removeChild(e.firstChild)}function alerta(e,r,o){const t=document.querySelector(".alerta");t&&t.remove();const n=document.createElement("DIV");n.textContent=r,n.classList.add("px-1","py-2","bg-red-500","text-white","font-bold","rounded-lg","my-2","text-center","alerta"),o.parentElement.insertBefore(n,o.nextElementSibling),setTimeout((()=>{n.remove()}),3500)}inputBuscar.addEventListener("input",buscarSolictud);