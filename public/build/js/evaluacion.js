document.addEventListener("DOMContentLoaded",(function(){cargarPreguntas(),enviarEvaluacion()}));let valorPregunta1="",valorPregunta2="",valorPregunta3="",valorPregunta4="";function cargarPreguntas(){document.querySelectorAll('[name="pregunta1"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta1=e.target.value,console.log(valorPregunta1)}))}));document.querySelectorAll('[name="pregunta2"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta2=e.target.value,console.log(valorPregunta2)}))}));document.querySelectorAll('[name="pregunta3"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta3=e.target.value,console.log(valorPregunta3)}))}));document.querySelectorAll('[name="pregunta4"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta4=e.target.value,console.log(valorPregunta4)}))}))}function enviarEvaluacion(){document.querySelector("#btn-enviar-evaluacion").addEventListener("click",(e=>{e.preventDefault(),validar()}))}function validar(){if(""===valorPregunta1)return void new Notyf({duration:5e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 1");if(""===valorPregunta2)return void new Notyf({duration:5e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 2");if(""===valorPregunta3)return void new Notyf({duration:5e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 3");if(""===valorPregunta4)return void new Notyf({duration:4e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 4");const e={id:Number.parseInt(id),pregunta1:Number.parseInt(valorPregunta1),pregunta2:Number.parseInt(valorPregunta2),pregunta3:Number.parseInt(valorPregunta3),pregunta4:Number.parseInt(valorPregunta4),estado:1,idAlumno:idAlumno,idMaestro:idMaestro,tutorias:tutorias};console.log(e),guardarEvaluacion(e)}async function guardarEvaluacion(e){const a=new FormData;for(const n in e)a.append(n,e[n]);try{const e="/api/evaluacion/actualizar",n=await fetch(e,{method:"POST",body:a});if("exito"===(await n.json()).tipo){document.querySelector("#container-preguntas").classList.add("hidden");document.querySelector("#mensaje-exito").classList.remove("hidden")}}catch(e){console.log(e)}}