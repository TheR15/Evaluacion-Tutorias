document.addEventListener("DOMContentLoaded",(function(){cargarPreguntas(),enviarEvaluacion()}));let valorPregunta1="",valorPregunta2="",valorPregunta3="",valorPregunta4="",comentarios="";function cargarPreguntas(){document.querySelectorAll('[name="pregunta1"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta1=e.target.value}))}));document.querySelectorAll('[name="pregunta2"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta2=e.target.value}))}));document.querySelectorAll('[name="pregunta3"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta3=e.target.value}))}));document.querySelectorAll('[name="pregunta4"]').forEach((e=>{e.addEventListener("input",(e=>{valorPregunta4=e.target.value}))}))}function enviarEvaluacion(){document.querySelector("#btn-enviar-evaluacion").addEventListener("click",(e=>{e.preventDefault(),validar()}))}function validar(){if(""===valorPregunta1)return void new Notyf({duration:5e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 1");if(""===valorPregunta2)return void new Notyf({duration:5e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 2");if(""===valorPregunta3)return void new Notyf({duration:5e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 3");if(""===valorPregunta4)return void new Notyf({duration:4e3,position:{x:"right",y:"top"}}).error("No has seleccionado ninguna respuesta en la pregunta 4");let e=Number.parseInt(id),a=Number.parseInt(valorPregunta1),r=Number.parseInt(valorPregunta2),n=Number.parseInt(valorPregunta3),t=Number.parseInt(valorPregunta4);comentarios=document.querySelector("#comentarios").value;const o={id:e,pregunta1:a,pregunta2:r,pregunta3:n,pregunta4:t,comentarios:comentarios,estado:1,idAlumno:idAlumno,idMaestro:idMaestro,tutorias:tutorias};console.log(o),guardarEvaluacion(o)}async function guardarEvaluacion(e){const a=new FormData;for(const r in e)a.append(r,e[r]);try{const e="/api/evaluacion/actualizar",r=await fetch(e,{method:"POST",body:a});if("exito"===(await r.json()).tipo){document.querySelector("#container-preguntas").classList.add("hidden");document.querySelector("#mensaje-exito").classList.remove("hidden")}}catch(e){console.log(e)}}